const i=document.querySelectorAll("img");console.log(i);i.forEach(async e=>{if(!o(e)){console.log("Image not accessible: "+e);const r=e.getAttribute("src");try{const t=await chrome.runtime.sendMessage({action:"analyzeImage",imageUrl:r});t&&t.success?(console.log("Received description:",t.description),e.alt=t.description.description,e.setAttribute("aria-label",t.description.description)):console.error("Failed to get description: ",t.error)}catch(t){console.error("Error sending message or getting response:",t)}}});function o(e){const r=e.getAttribute("alt");if(r!==null&&r.trim()!==""||e.getAttribute("aria-hidden")==="true"||e.getAttribute("role")==="presentation")return!0;const t=window.getComputedStyle(e);if(t.display=="none"||t.visibility=="hidden")return!0;const n=parseFloat(t.opacity);return n==0||n<.05||e.clientWidth<50||e.clientHeight<50||!e.complete||e.naturalHeight===0||e.naturalWidth===0||!e.currentSrc}
